Create a lambda function - trigger-mlops-flow - which will trigger the state machine - my-mlops-flow - upon input dataset upload

Create a SQS queue - mlops-flow-queue - that has visibilty timeout greater than the execution time of the lambda function - trigger-mlops-flow.
The SQS queue must have below access policy so as to be able to accept event notifications from the S3 bucket data-us-west-2-100163808729, where the input dataset will be uploaded.
{
  "Version": "2012-10-17",
  "Id": "example-ID",
  "Statement": [
    {
      "Sid": "example-statement-ID",
      "Effect": "Allow",
      "Principal": {
        "Service": "s3.amazonaws.com"
      },
      "Action": "SQS:SendMessage",
      "Resource": "arn:aws:sqs:us-west-2:<account-id>:mlops-flow-queue",
      "Condition": {
        "StringEquals": {
          "aws:SourceAccount": "<account-id>"
        },
        "ArnLike": {
          "aws:SourceArn": "arn:aws:s3:*:*:data-us-west-2-<account-id>"
        }
      }
    }
  ]
}


Create event notification in S3 with destination as above SQS queue and source prefix - input/, suffix - .csv

In the lambda function trigger-mlops-flow, add Trigger as the above SQS queue mlops-flow-queue.

Upload the input dataset diamonds.csv in data-us-west-2-100163808729/input and verify if the lambda is getting triggered with default code.

Update the lambda function code to trigger the State Machine


